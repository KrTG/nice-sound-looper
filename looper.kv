<Screen>:
    track1: track1
    track2: track2
    track3: track3
    track4: track4
    latency_adjustment: latency_adjustment
    noise_threshold: noise_threshold
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            size_hint_y: 8
            orientation: 'vertical'
            Track:
                id: track1
                screen: root
                number: 1
            Track:
                id: track2
                screen: root
                number: 2
            Track:
                id: track3
                screen: root
                number: 3
            Track:
                id: track4
                screen: root
                number: 4
        BoxLayout:
            size_hint_y: 2
            orientation: 'horizontal'
            Button:
                size_hint_x: 3
                text: "Save Project"
                on_release: root.show_save()
            Button:
                size_hint_x: 3
                text: "Load Project"
                on_release: root.show_load()
            Button:
                size_hint_x: 3
                text: "Reset"
                on_release: root.reset()
            BoxLayout:
                orientation: 'vertical'
                size_hint_x:4
                BoxLayout:
                    size_hint_y: 4
                    orientation: 'horizontal'
                    BoxLayout:
                        size_hint_x:2
                        orientation: 'vertical'
                        Label:
                            text: "latency adjustment"
                        TextInput:
                            id: latency_adjustment
                            text: "0"
                    BoxLayout:
                        size_hint_x:2
                        orientation: 'vertical'
                        Label:
                            text: "noise threshold"
                        TextInput:
                            id: noise_threshold
                            text: "1.0"
                        Button:
                            background_color: root.noise_sample_button_color
                            text: "Get noise sample"
                            on_release: root.get_noise_sample()
                Button:
                    size_hint_y: 1
                    text: "Save"
                    on_release: root.save_config()



<Track>:
    box: box
    BoxLayout:
        orientation: 'horizontal'
        Label:
            size_hint_x: None
            text: str(root.number)
        Button:
            size_hint_x: None
            text: root.record_button_text
            background_color: root.record_button_color
            on_release: root.on_press_record()
        Button:
            size_hint_x: None
            background_color: root.play_button_color
            text: root.play_button_text
            on_release: root.on_press_play()
        RelativeLayout:
            id: box
            size_hint_x:6
            Image:
                size_hint: (root.scale, 1)
                texture: root.texture
                keep_ratio: False
                allow_stretch: True
            BoxLayout:
        Label:
            size_hint_x: None
            text: root.info

<LoadDialog>:
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserListView:
            id: filechooser
            path: "."

        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Cancel"
                on_release: root.cancel()
            Button:
                text: "Load"
                on_release: root.load(filechooser.path, filechooser.selection)

<SaveDialog>:
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserListView:
            id: filechooser
            path: "."
            on_selection: text_input.text = self.selection and self.selection[0] or ''

        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: 30
            Label:
                size_hint_x: 2
                text: "Save file: "
            TextInput:
                id: text_input
                size_hint_x: 10
                multiline: False
            Label:
                size_hint_x: 2
                text: ".looper"

        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Cancel"
                on_release: root.cancel()
            Button:
                text: "Save"
                on_release: root.save(filechooser.path, text_input.text)
